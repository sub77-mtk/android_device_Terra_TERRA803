From f39efd2e608a9c09d29ad8827367eba0bae35361 Mon Sep 17 00:00:00 2001
From: ferhung-mtk <ferhung27@gmail.com>
Date: Sun, 17 Apr 2016 23:33:38 +0800
Subject: [PATCH 8/9] MediaTek: healthd: correctly report battery voltage on
 MTK kernels.

Signed-off-by: sub77 <sub77@ymail.com>

Conflicts:
	healthd/BatteryMonitor.cpp

Change-Id: I5692ba84dddb3d8108aad2adfd0d9d6c81647df5
Signed-off-by: sub77 <sub77@ymail.com>
---
 healthd/BatteryMonitor.cpp | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/healthd/BatteryMonitor.cpp b/healthd/BatteryMonitor.cpp
index 8c79241..756894f 100644
--- a/healthd/BatteryMonitor.cpp
+++ b/healthd/BatteryMonitor.cpp
@@ -222,8 +222,11 @@ bool BatteryMonitor::update(void) {
     props.batteryLevel = mBatteryFixedCapacity ?
         mBatteryFixedCapacity :
         getIntField(mHealthdConfig->batteryCapacityPath);
+#ifndef MTK_HARDWARE
     props.batteryVoltage = getIntField(mHealthdConfig->batteryVoltagePath) / 1000;
-
+#else
+    props.batteryVoltage = getIntField(mHealthdConfig->batteryVoltagePath);
+#endif
     if (!mHealthdConfig->batteryCurrentNowPath.isEmpty())
         props.batteryCurrent = getIntField(mHealthdConfig->batteryCurrentNowPath) / 1000;
 
-- 
2.1.4

